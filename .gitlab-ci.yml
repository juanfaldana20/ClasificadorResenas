variables:
  UV_VERSION: "0.5"
  PYTHON_VERSION: "3.11"
  BASE_LAYER: "bookworm-slim"

stages:
  - test

# 1️⃣ Tests del backend
run_tests:
  stage: test
  image: ghcr.io/astral-sh/uv:${UV_VERSION}-python${PYTHON_VERSION}-${BASE_LAYER}
  before_script:
    - apt-get update && apt-get install -y make libgl1-mesa-glx libglib2.0-0
    - cd backend/ML
  script:
    - uv pip install --system pytest
    - pytest codigos_test.py
  rules:
    - if: '$CI_COMMIT_BRANCH == "develop"'
